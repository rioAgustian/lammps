boundary p p f
units real
atom_style full
bond_style harmonic
angle_style harmonic
pair_style lj/cut/tip4p/long O H O-H H-O-H 0.1546 12.0
kspace_style pppm/tip4p 1.0e-5
kspace_modify slab 3.0

read_data create.data
include parameters.inc
include groups.inc

fix myshk H2O shake 1.0e-5 200 0 b O-H a H-O-H kbond 2000

thermo 1
thermo_style custom step temp etotal press

variable mystep equal step
variable mytemp equal temp
variable myetotal equal etotal
variable mypress equal press
variable walltopz equal xcm(walltop,z)
variable wallbotz equal xcm(wallbot,z)
variable deltaz equal v_walltopz-v_wallbotz

# Use fix print to output
fix print_data all print 100 "${mystep} ${mytemp} ${myetotal} ${mypress} ${deltaz}" file number_data.txt screen no title "step temp tot_eng press deltaz"

minimize 1.0e-10 1.0e-10 10000 10000
reset_timestep 0

dump mydump all atom 100 dump.lammpstrj

fix mynvt all nvt temp 300 300 100
fix myshk H2O shake 1.0e-5 200 0 b O-H a H-O-H
fix myrct all recenter NULL NULL 0
timestep 0.01

thermo 100
thermo_style custom step temp etotal press v_deltaz

run 30000
write_data equilibrate.data nocoeff
